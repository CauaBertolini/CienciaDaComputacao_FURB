REATE TABLE municipio (
 cd_municipio INT PRIMARY KEY,
 nm_municipio VARCHAR(50),
 sg_uf CHAR(2)
);

CREATE TABLE endereco (
 cd_endereco INT PRIMARY KEY,
 ds_logradouro VARCHAR(50),
 ds_complemento VARCHAR(50),
 nm_bairro VARCHAR(30),
 nr_cep CHAR(8),
 cd_municipio INT,
 CONSTRAINT municipio_endereco_fk FOREIGN KEY (cd_municipio)
 REFERENCES municipio (cd_municipio)
);

CREATE TABLE cliente (
 cd_cliente INT PRIMARY KEY,
 nm_cliente VARCHAR(50),
 nr_telefone VARCHAR(15),
 ds_email VARCHAR(50),
 dt_nascimento DATE,
 cd_endereco INT,
 CONSTRAINT endereco_cliente_fk FOREIGN KEY (cd_endereco)
 REFERENCES endereco (cd_endereco)
);

CREATE TABLE especie (
 cd_especie INT PRIMARY KEY,
 nm_especie VARCHAR(30)
);

CREATE TABLE raca (
 cd_raca INT PRIMARY KEY,
 nm_raca VARCHAR(50),
 cd_especie INT,
 CONSTRAINT especie_raca_fk FOREIGN KEY (cd_especie)
 REFERENCES especie (cd_especie)
);

CREATE TABLE animal (
 cd_animal INT PRIMARY KEY,
 nm_animal VARCHAR(50),
 ds_animal VARCHAR(50),
 dt_nascimento DATE,
 tp_porte CHAR(1),
 cd_raca INT,
 cd_cliente INT,
 CONSTRAINT raca_animal_fk FOREIGN KEY (cd_raca)
 REFERENCES raca (cd_raca),
 CONSTRAINT cliente_animal_fk FOREIGN KEY (cd_cliente)
 REFERENCES cliente (cd_cliente)
);

CREATE TABLE categoria (
 cd_categoria INT PRIMARY KEY,
 ds_categoria VARCHAR(50)
);

CREATE TABLE produto (
 cd_produto INT PRIMARY KEY,
 nm_produto VARCHAR(50),
 ds_produto VARCHAR(50),
 vl_custo DECIMAL(8,2),
 vl_venda DECIMAL(8,2),
 qt_estoque INT,
 cd_categoria INT,
 CONSTRAINT categoria_produto_fk FOREIGN KEY (cd_categoria)
 REFERENCES categoria (cd_categoria)
);

CREATE TABLE nota_fiscal (
 nr_nota_fiscal INT PRIMARY KEY,
 dt_emissao DATE,
 vl_total DECIMAL(8,2),
 cd_cliente INT,
 CONSTRAINT cliente_nota_fk FOREIGN KEY (cd_cliente)
 REFERENCES cliente (cd_cliente)
);

CREATE TABLE item_nota_fiscal (
 nr_nota_fiscal INT,
 cd_produto INT,
 qt_produto INT,
 vl_produto DECIMAL(8,2),
 PRIMARY KEY (nr_nota_fiscal, cd_produto),
 CONSTRAINT nota_item_fk FOREIGN KEY (nr_nota_fiscal)
 REFERENCES nota_fiscal (nr_nota_fiscal),
 CONSTRAINT produto_item_fk FOREIGN KEY (cd_produto)
 REFERENCES produto (cd_produto)
);

CREATE TABLE prestador_servico (
 cd_prestador INT PRIMARY KEY,
 nm_prestador VARCHAR(50),
 nr_telefone VARCHAR(50),
 ds_email VARCHAR(50),
 cd_endereco INT,
 CONSTRAINT endereco_prestador_fk FOREIGN KEY (cd_endereco)
 REFERENCES endereco (cd_endereco)
);

CREATE TABLE servico (
 cd_servico INT PRIMARY KEY,
 ds_servico VARCHAR(50),
 vl_servico DECIMAL(6,2)
);

CREATE TABLE servico_prestador (
 cd_prestador INT,
 cd_servico INT,
 PRIMARY KEY (cd_prestador, cd_servico),
 CONSTRAINT prestador_servico_fk FOREIGN KEY (cd_prestador)
 REFERENCES prestador_servico (cd_prestador),
 CONSTRAINT servico_servico_fk FOREIGN KEY (cd_servico)
 REFERENCES servico (cd_servico)
);

CREATE TABLE agendamento (
 nr_agendamento INT PRIMARY KEY,
 dt_agendamento DATE,
 hr_agendamento TIME,
 cd_prestador INT,
 cd_cliente INT,
 cd_animal INT,
 CONSTRAINT prestador_agendamento_fk FOREIGN KEY (cd_prestador)
 REFERENCES prestador_servico (cd_prestador),
 CONSTRAINT cliente_agendamento_fk FOREIGN KEY (cd_cliente)
 REFERENCES cliente (cd_cliente),
 CONSTRAINT animal_agendamento_fk FOREIGN KEY (cd_animal)
 REFERENCES animal (cd_animal)
);

CREATE TABLE agendamento_servico (
 nr_agendamento INT,
 cd_servico INT,
 qt_servico INT,
 vl_servico DECIMAL(6,2),
 PRIMARY KEY (nr_agendamento, cd_servico),
 CONSTRAINT servico_agendamento_servico_fk FOREIGN KEY (cd_servico)
 REFERENCES servico (cd_servico),
 CONSTRAINT agendamento_agendamento_servico_fk FOREIGN KEY (nr_agendamento)
 REFERENCES agendamento (nr_agendamento)
);